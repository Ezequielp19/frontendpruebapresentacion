<div class="container-fluid boxHero d-flex justify-content-center">
    <div class="wrapper my-5">
        <div id="formContent" class="">
            <mat-tab-group #tabGroup mat-stretch-tabs class="example-stretched-tabs mat-elevation-z4" dynamicHeight>
                <mat-tab>
                    <ng-template mat-tab-label>
                        <mat-icon class="mx-2">assignment</mat-icon>
                        Nombre de Servicio
                    </ng-template>
                    <app-name-service (formDataChange)="updateFormData($event, 0)"></app-name-service>
                </mat-tab>
                <mat-tab>
                    <ng-template mat-tab-label>
                        <mat-icon class="mx-2"> notes</mat-icon>
                        Descripcion de Servicio
                    </ng-template>
                    <app-description-service (formDataChange)="updateFormData($event, 1)"></app-description-service>
                </mat-tab>
                <mat-tab>
                    <ng-template mat-tab-label>
                        <mat-icon class="mx-2">payment</mat-icon>
                        Metodos de Pago
                    </ng-template>
                    <app-billing-pay-service (formDataChange)="updateFormData($event, 2)"></app-billing-pay-service>
                </mat-tab>
            </mat-tab-group>

            <!-- Navegación entre pestañas -->
            <div class="row d-flex justify-content-between my-4">
                <div class="col-3">
                    <button 
                        *ngIf="currentStep > 0"
                        class="btn btn-secondary" 
                        (click)="previousStep()"
                        [disabled]="isLoading">
                        <mat-icon>arrow_back</mat-icon>
                        Anterior
                    </button>
                </div>
                
                <div class="col-3 text-center">
                    <span class="text-muted">{{ currentStep + 1 }} de 3</span>
                </div>
                
                <div class="col-3 text-end">
                    <button 
                        *ngIf="currentStep < 2"
                        class="btn btn-primary" 
                        (click)="nextStep()"
                        [disabled]="!isCurrentStepValid() || isLoading">
                        Siguiente
                        <mat-icon>arrow_forward</mat-icon>
                    </button>
                    
                    <button 
                        *ngIf="currentStep === 2"
                        class="btn btn-success" 
                        (click)="submitForm()"
                        [disabled]="!mainForm.valid || isLoading">
                        <mat-icon *ngIf="!isLoading">save</mat-icon>
                        <mat-spinner *ngIf="isLoading" diameter="20"></mat-spinner>
                        {{ isLoading ? 'Enviando...' : 'Crear Servicio' }}
                    </button>
                </div>
            </div>

            <!-- Indicador de progreso -->
            <div class="progress-container mt-3">
                <div class="progress">
                    <div 
                        class="progress-bar bg-primary" 
                        [style.width.%]="((currentStep + 1) / 3) * 100"
                        role="progressbar">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>